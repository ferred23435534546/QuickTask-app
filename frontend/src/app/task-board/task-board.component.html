<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valorar Tarea</title>
    <link rel="stylesheet" href="task-board.component.scss">
</head>
<body>
 <style>
        /* Estilos básicos para las estrellas */
        .rating {
            display: inline-block;
        }
        .rating input {
            display: none;
        }
        .rating label {
            float: right;
            color: #ddd;
            font-size: 2em;
            padding: 5px;
            text-decoration: none;
        }
        .rating label:hover,
        .rating label:hover ~ label,
        .rating input:checked ~ label {
            color: #ffc107;
        }
        .campo-formulario {
            margin-bottom: 15px;
        }
        .boton-azul {
            background-color: #007bff;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .boton-azul:hover {
            background-color: #0056b3;
        }
        #mensaje-valoracion {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f9f9f9;
            display: none; /* Oculto inicialmente */
        }
        .error-message {
            color: red;
            font-size: 0.9em;
            margin-top: 5px;
        }
    </style>
    <main>
        <section id="formulario-valoracion">
            <h2>Por favor, valora la tarea:</h2>
            <form id="form-valoracion-tarea">
                <div class="campo-formulario">
                    <label for="tarea-id">Tarea realizada:</label>
                    <input type="text" id="tarea-id" name="tarea-id" placeholder="Si aplica">
                </div>

                <div class="campo-formulario">
                    <label>Puntuación (1-5):</label>
                    <div class="rating">
                        <input type="radio" id="star5" name="puntuacion" value="5" required /><label for="star5" title="Excelente">★</label>
                        <input type="radio" id="star4" name="puntuacion" value="4" /><label for="star4" title="Bien">★</label>
                        <input type="radio" id="star3" name="puntuacion" value="3" /><label for="star3" title="Regular">★</label>
                        <input type="radio" id="star2" name="puntuacion" value="2" /><label for="star2" title="Mal">★</label>
                        <input type="radio" id="star1" name="puntuacion" value="1" /><label for="star1" title="Muy Mal">★</label>
                    </div>
                    <div id="error-puntuacion" class="error-message"></div>
                </div>

                <div class="campo-formulario">
                    <label for="comentarios">Comentarios Adicionales (opcional):</label>
                    <textarea id="comentarios" name="comentarios" rows="5" placeholder="¿Algún comentario sobre la tarea?"></textarea>
                </div>

                <div class="campo-formulario">
                    <label>Valoración por Aspectos (opcional):</label><br>
                    <input type="checkbox" id="completo" name="aspecto-completo" value="completo">
                    <label for="completo">Completado según lo esperado</label><br>
                    <input type="checkbox" id="tiempo" name="aspecto-tiempo" value="tiempo">
                    <label for="tiempo">Realizado a tiempo</label><br>
                    <input type="checkbox" id="calidad" name="aspecto-calidad" value="calidad">
                    <label for="calidad">Buena calidad</label><br>
                    </div>

                <button type="submit" class="boton-azul">Enviar Valoración</button>
            </form>

            <div id="mensaje-valoracion"></div>
        </section>

        </main>

    <footer>
        <p>&copy; 2025 Aplicación de Tareas</p>
    </footer>

    <script>
        const formularioValoracion = document.getElementById('form-valoracion-tarea');
        const mensajeValoracionDiv = document.getElementById('mensaje-valoracion');
        const puntuacionRadios = document.querySelectorAll('input[name="puntuacion"]');
        const errorPuntuacion = document.getElementById('error-puntuacion');

        formularioValoracion.addEventListener('submit', function(event) {
            event.preventDefault();

            let puntuacionSeleccionada = null;
            puntuacionRadios.forEach(radio => {
                if (radio.checked) {
                    puntuacionSeleccionada = radio.value;
                }
            });

            if (!puntuacionSeleccionada) {
                errorPuntuacion.textContent = "Por favor, selecciona una puntuación.";
                return;
            } else {
                errorPuntuacion.textContent = "";
            }

            const tareaId = document.getElementById('tarea-id').value;
            const comentarios = document.getElementById('comentarios').value;
            const aspectosValorados = [];
            if (document.getElementById('completo').checked) aspectosValorados.push('Completo');
            if (document.getElementById('tiempo').checked) aspectosValorados.push('A tiempo');
            if (document.getElementById('calidad').checked) aspectosValorados.push('Buena calidad');
            // Añade aquí la lógica para recoger otros aspectos si los incluyes

            // Simulación de envío de datos (aquí iría tu código para enviar al servidor)
            console.log("ID de la Tarea:", tareaId);
            console.log("Puntuación:", puntuacionSeleccionada);
            console.log("Comentarios:", comentarios);
            console.log("Aspectos Valorados:", aspectosValorados);

            mensajeValoracionDiv.textContent = "¡Gracias por tu valoración! Ha sido enviada correctamente.";
            mensajeValoracionDiv.style.display = 'block'; // Mostrar el mensaje

            formularioValoracion.reset();
            // Deseleccionar las estrellas
            puntuacionRadios.forEach(radio => radio.checked = false);
        });
    </script>
</body>
</html>